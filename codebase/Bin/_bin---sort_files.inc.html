<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  <html xmlns="http://www.w3.org/1999/xhtml">
		<head>
			<!-- template designed by Marco Von Ballmoos  -->
			<title>Docs for page sort_files.inc</title>
			<link rel="stylesheet" href="../media/stylesheet.css" />
						<script src="../media/lib/classTree.js"></script>
												<script language="javascript" type="text/javascript">
				var imgPlus = new Image();
				var imgMinus = new Image();
				imgPlus.src = "../media/images/plus.png";
				imgMinus.src = "../media/images/minus.png";
				
				function showNode(Node){
							switch(navigator.family){
								case 'nn4':
									// Nav 4.x code fork...
							var oTable = document.layers["span" + Node];
							var oImg = document.layers["img" + Node];
									break;
								case 'ie4':
									// IE 4/5 code fork...
							var oTable = document.all["span" + Node];
							var oImg = document.all["img" + Node];
									break;
								case 'gecko':
									// Standards Compliant code fork...
							var oTable = document.getElementById("span" + Node);
							var oImg = document.getElementById("img" + Node);
									break;
							}
					oImg.src = imgMinus.src;
					oTable.style.display = "block";
				}
				
				function hideNode(Node){
							switch(navigator.family){
								case 'nn4':
									// Nav 4.x code fork...
							var oTable = document.layers["span" + Node];
							var oImg = document.layers["img" + Node];
									break;
								case 'ie4':
									// IE 4/5 code fork...
							var oTable = document.all["span" + Node];
							var oImg = document.all["img" + Node];
									break;
								case 'gecko':
									// Standards Compliant code fork...
							var oTable = document.getElementById("span" + Node);
							var oImg = document.getElementById("img" + Node);
									break;
							}
					oImg.src = imgPlus.src;
					oTable.style.display = "none";
				}
				
				function nodeIsVisible(Node){
							switch(navigator.family){
								case 'nn4':
									// Nav 4.x code fork...
							var oTable = document.layers["span" + Node];
									break;
								case 'ie4':
									// IE 4/5 code fork...
							var oTable = document.all["span" + Node];
									break;
								case 'gecko':
									// Standards Compliant code fork...
							var oTable = document.getElementById("span" + Node);
									break;
							}
					return (oTable && oTable.style.display == "block");
				}
				
				function toggleNodeVisibility(Node){
					if (nodeIsVisible(Node)){
						hideNode(Node);
					}else{
						showNode(Node);
					}
				}
			</script>
					</head>
		<body>
			<div class="page-body">			
<h2 class="file-name">/bin/sort_files.inc</h2>

<a name="sec-description"></a>
<div class="info-box">
	<div class="info-box-title">Description</div>
	<div class="nav-bar">
					<span class="disabled">Description</span> |
									<a href="#sec-includes">Includes</a>
			|											<a href="#sec-functions">Functions</a>
			</div>
	<div class="info-box-body">	
		<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Sort Files</p>
<p class="description"><p>PHP version 5</p><p>LICENSE: GNU General Public License, version 2 (GPLv2)  Copyright (c) 2001 - 2011 Ampache.org All Rights Reserved</p><p>This program is free software; you can redistribute it and/or  modify it under the terms of the GNU General Public License v2  as published by the Free Software Foundation.</p><p>This program is distributed in the hope that it will be useful,  but WITHOUT ANY WARRANTY; without even the implied warranty of  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the  GNU General Public License for more details.</p><p>You should have received a copy of the GNU General Public License  along with this program; if not, write to the Free Software  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.</p></p>
	<ul class="tags">
				<li><span class="field">author:</span> Karl Vollmer &lt;<a href="mailto:vollmer@ampache.org">vollmer@ampache.org</a>&gt;</li>
				<li><span class="field">version:</span> PHP 5.2</li>
				<li><span class="field">copyright:</span> 2001 - 2011 Ampache.org</li>
				<li><span class="field">link:</span> <a href="http://www.ampache.org/">http://www.ampache.org/</a></li>
				<li><span class="field">since:</span> File available since Release 1.0</li>
				<li><span class="field">license:</span> <a href="http://opensource.org/licenses/gpl-2.0">GPLv2</a></li>
			</ul>
		
			</div>
</div>
		

	<a name="sec-includes"></a>	
	<div class="info-box">
		<div class="info-box-title">Includes</div>
		<div class="nav-bar">
			<a href="#sec-description">Description</a> |
						<span class="disabled">Includes</span>
			|													<a href="#sec-functions">Functions</a>
					</div>
		<div class="info-box-body">	
			<a name="_$prefix_/lib/init_php"><!-- --></a>
<div class="oddrow">
	
	<div>
		<span class="include-title">
			<span class="include-type">require_once</span>
			(<span class="include-name">$prefix.'/lib/init.php'</span>)
			(line <span class="line-number">56</span>)
		</span>
	</div>

	<!-- ========== Info from phpDoc block ========= -->
	
</div>
		</div>
	</div>
	
	
	
	<a name="sec-functions"></a>	
	<div class="info-box">
		<div class="info-box-title">Functions</div>
		<div class="nav-bar">
			<a href="#sec-description">Description</a> |
										<a href="#sec-includes">Includes</a>
				|												<span class="disabled">Functions</span>
		</div>
		<div class="info-box-body">	
			<a name="functionsort_clean_name" id="functionsort_clean_name"><!-- --></a>
<div class="evenrow">
	
	<div>
		<span class="method-title">sort_clean_name</span> (line <span class="line-number">195</span>)
	</div> 

	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">sort_clean_name</p>
<p class="description"><p>We have to have some special rules here  This is run on every individual element of the search  Before it is put togeather, this removes / and \ and also  once I figure it out, it'll clean other stuff</p></p>
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			sort_clean_name
		</span>
					(<span class="var-type"></span>&nbsp;<span class="var-name">$string</span>)
			</div>

			<ul class="parameters">
					<li>
				<span class="var-type"></span>
				<span class="var-name">$string</span>			</li>
				</ul>
		
	
</div>
<a name="functionsort_element_name" id="functionsort_element_name"><!-- --></a>
<div class="oddrow">
	
	<div>
		<span class="method-title">sort_element_name</span> (line <span class="line-number">162</span>)
	</div> 

	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">sort_element_name</p>
<p class="description"><p>gets the name of the %? in a yea.. too much beer</p></p>
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			sort_element_name
		</span>
					(<span class="var-type"></span>&nbsp;<span class="var-name">$key</span>)
			</div>

			<ul class="parameters">
					<li>
				<span class="var-type"></span>
				<span class="var-name">$key</span>			</li>
				</ul>
		
	
</div>
<a name="functionsort_find_home" id="functionsort_find_home"><!-- --></a>
<div class="evenrow">
	
	<div>
		<span class="method-title">sort_find_home</span> (line <span class="line-number">112</span>)
	</div> 

	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">sort_find_home</p>
<p class="description"><p>Get the directory for this file from the catalog and the song info using the sort_pattern  takes into account various artists and the alphabet_prefix</p></p>
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			sort_find_home
		</span>
					(<span class="var-type"></span>&nbsp;<span class="var-name">$song</span>, <span class="var-type"></span>&nbsp;<span class="var-name">$sort_pattern</span>, <span class="var-type"></span>&nbsp;<span class="var-name">$base</span>)
			</div>

			<ul class="parameters">
					<li>
				<span class="var-type"></span>
				<span class="var-name">$song</span>			</li>
					<li>
				<span class="var-type"></span>
				<span class="var-name">$sort_pattern</span>			</li>
					<li>
				<span class="var-type"></span>
				<span class="var-name">$base</span>			</li>
				</ul>
		
	
</div>
<a name="functionsort_move_file" id="functionsort_move_file"><!-- --></a>
<div class="oddrow">
	
	<div>
		<span class="method-title">sort_move_file</span> (line <span class="line-number">218</span>)
	</div> 

	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">sort_move_file</p>
<p class="description"><p>All this function does is, move the friggin file and then update the database  We can't use the rename() function of PHP because it's functionality depends on the  current phase of the moon, the alignment of the planets and my current BAL  Instead we cheeseball it and walk through the new dir structure and make  sure that the directories exist, once the dirs exist then we do a copy  and unlink.. This is a little unsafe, and as such it verifys the copy  worked by doing a filesize() before unlinking.</p></p>
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			sort_move_file
		</span>
					(<span class="var-type"></span>&nbsp;<span class="var-name">$song</span>, <span class="var-type"></span>&nbsp;<span class="var-name">$fullname</span>)
			</div>

			<ul class="parameters">
					<li>
				<span class="var-type"></span>
				<span class="var-name">$song</span>			</li>
					<li>
				<span class="var-type"></span>
				<span class="var-name">$fullname</span>			</li>
				</ul>
		
	
</div>
		</div>
	</div>
	
	<p class="notes" id="credit">
		Documentation generated on Fri, 04 Feb 2011 09:46:15 +0900 by <a href="http://www.phpdoc.org" target="_blank">phpDocumentor 1.4.3</a>
	</p>
	</div></body>
</html>